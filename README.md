# ğŸ¤– å¤šæ™ºèƒ½ä½“ååŒç³»ç»Ÿ

åŸºäºç°æœ‰MCPå®¢æˆ·ç«¯é¡¹ç›®å®ç°çš„å¤šæ™ºèƒ½ä½“ååŒDemoç³»ç»Ÿï¼Œå‚è€ƒOpenManusè®¾è®¡ç†å¿µï¼Œæ”¯æŒæ€è€ƒã€å·¥å…·è°ƒç”¨å’Œå¤šæ™ºèƒ½ä½“åä½œã€‚ç³»ç»Ÿé‡‡ç”¨SSE (Server-Sent Events) æµå¼æ¥å£è®¾è®¡ï¼Œå®æ—¶æ¨é€æ™ºèƒ½ä½“çš„æ€è€ƒè¿‡ç¨‹ã€å·¥å…·è°ƒç”¨ç»“æœå’Œåä½œçŠ¶æ€ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **å¤šæ™ºèƒ½ä½“ååŒ**: æ”¯æŒå¤šä¸ªæ™ºèƒ½ä½“å¹¶è¡Œå·¥ä½œå’Œåä½œ
- ğŸ”„ **æµå¼å“åº”**: åŸºäºSSEçš„å®æ—¶æ€è€ƒè¿‡ç¨‹å’Œæ‰§è¡ŒçŠ¶æ€æ¨é€
- ğŸ› ï¸ **MCPå·¥å…·é›†æˆ**: æ”¯æŒå¤šç§MCPå·¥å…·å’Œæ‰©å±•
- ğŸ’­ **æ€è€ƒè¿‡ç¨‹å¯è§†åŒ–**: å±•ç¤ºæ™ºèƒ½ä½“çš„æ¨ç†å’Œå†³ç­–è¿‡ç¨‹
- ğŸ¯ **ä»»åŠ¡è‡ªåŠ¨åˆ†è§£**: å°†å¤æ‚ä»»åŠ¡æ‹†è§£ä¸ºå¯æ‰§è¡Œæ­¥éª¤
- ğŸ“Š **çŠ¶æ€ç®¡ç†**: å®Œæ•´çš„æ‰§è¡ŒçŠ¶æ€è·Ÿè¸ªå’Œç®¡ç†
- ğŸŒ **ç°ä»£åŒ–å‰ç«¯**: ç¾è§‚çš„Webç•Œé¢ï¼Œå®æ—¶å±•ç¤ºåä½œè¿‡ç¨‹

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Node.js + TypeScript + Express
- **æ™ºèƒ½ä½“æ¡†æ¶**: åŸºäºOpenManusæ¶æ„è®¾è®¡
- **MCPé›†æˆ**: @modelcontextprotocol/sdk
- **LLM**: OpenAI API (æ”¯æŒå…¶ä»–LLM)
- **é€šä¿¡åè®®**: SSE (Server-Sent Events)
- **å‰ç«¯**: åŸç”ŸHTML/CSS/JavaScript
- **æ•°æ®æ ¼å¼**: JSON

## ğŸ“ é¡¹ç›®ç»“æ„

```
mcp-client/
â”œâ”€â”€ docs/                    # è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md           # é¡¹ç›®æ¦‚è¿°
â”‚   â”œâ”€â”€ agent-design.md     # æ™ºèƒ½ä½“è®¾è®¡
â”‚   â”œâ”€â”€ api-protocol.md     # APIåè®®
â”‚   â””â”€â”€ flow-control.md     # æµç¨‹æ§åˆ¶
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ agents/             # æ™ºèƒ½ä½“å®ç°
â”‚   â”‚   â”œâ”€â”€ BaseAgent.ts    # åŸºç¡€æ™ºèƒ½ä½“
â”‚   â”‚   â”œâ”€â”€ ReActAgent.ts   # ReActæ™ºèƒ½ä½“
â”‚   â”‚   â””â”€â”€ PlannerAgent.ts # è§„åˆ’æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ Memory.ts      # è®°å¿†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ LLMClient.ts   # LLMå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ TaskManager.ts # ä»»åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ server/            # æœåŠ¡å™¨
â”‚   â”‚   â””â”€â”€ app.ts         # Expressåº”ç”¨
â”‚   â”œâ”€â”€ types/             # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts       # åŸºç¡€ç±»å‹
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ Logger.ts      # æ—¥å¿—å·¥å…·
â”‚   â”‚   â””â”€â”€ uuid.ts        # UUIDç”Ÿæˆ
â”‚   â””â”€â”€ main.ts            # ç¨‹åºå…¥å£
â”œâ”€â”€ public/                # é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ index.html         # å‰ç«¯Demo
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json          # TypeScripté…ç½®
â””â”€â”€ README.md             # æœ¬æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…ä¾èµ–
npm install

# å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶
cp .env.example .env
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œè®¾ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼š

```env
# OpenAI APIé…ç½®
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_BASE_URL=https://api.openai.com/v1

# æœåŠ¡å™¨é…ç½®
PORT=3000
NODE_ENV=development
```

### 3. å¯åŠ¨æœåŠ¡

```bash
# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨æœåŠ¡å™¨
npm start

# æˆ–è€…ä½¿ç”¨å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰
npm run dev
```

### 4. è®¿é—®Demo

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- å‰ç«¯Demo: http://localhost:3000/static/index.html
- å¥åº·æ£€æŸ¥: http://localhost:3000/health
- APIæ–‡æ¡£: è§ä¸‹æ–¹APIæ¥å£è¯´æ˜

## ğŸ“– APIæ¥å£

### åˆ›å»ºååŒä»»åŠ¡

```http
POST /api/v1/tasks/collaborate
Content-Type: application/json

{
  "task": "åˆ†æAIæŠ€æœ¯å‘å±•è¶‹åŠ¿å¹¶ç”ŸæˆæŠ¥å‘Š",
  "priority": "normal",
  "options": {
    "stream": true,
    "maxSteps": 10,
    "timeout": 300
  }
}
```

### SSEæµå¼æ¥å£

```http
GET /api/v1/tasks/{taskId}/stream
```

æ”¯æŒçš„äº‹ä»¶ç±»å‹ï¼š
- `connected`: è¿æ¥å»ºç«‹
- `task_started`: ä»»åŠ¡å¼€å§‹
- `agent_thinking`: æ™ºèƒ½ä½“æ€è€ƒ
- `agent_action`: æ™ºèƒ½ä½“è¡ŒåŠ¨
- `task_completed`: ä»»åŠ¡å®Œæˆ
- `task_failed`: ä»»åŠ¡å¤±è´¥
- `heartbeat`: å¿ƒè·³æ£€æµ‹

### è·å–ä»»åŠ¡çŠ¶æ€

```http
GET /api/v1/tasks/{taskId}
```

## ğŸ¤– æ™ºèƒ½ä½“æ¶æ„

ç³»ç»Ÿé‡‡ç”¨åˆ†å±‚çš„æ™ºèƒ½ä½“è®¾è®¡ï¼š

```
åº”ç”¨å±‚ï¼šå…·ä½“ä¸šåŠ¡æ™ºèƒ½ä½“ (PlannerAgent, ExecutorAgent)
   â†“
æ¡†æ¶å±‚ï¼šæ™ºèƒ½ä½“åŸºç¡€èƒ½åŠ› (ToolCallAgent)
   â†“  
æ ¸å¿ƒå±‚ï¼šåŸºç¡€æŠ½è±¡ (ReActAgent)
   â†“
åŸºç¡€å±‚ï¼šé€šç”¨åŠŸèƒ½ (BaseAgent)
```

### æ™ºèƒ½ä½“ç±»å‹

- **PlannerAgent**: è§„åˆ’æ™ºèƒ½ä½“ï¼Œè´Ÿè´£ä»»åŠ¡åˆ†æå’Œè®¡åˆ’åˆ¶å®š
- **ExecutorAgent**: æ‰§è¡Œæ™ºèƒ½ä½“ï¼Œè´Ÿè´£å…·ä½“å·¥å…·è°ƒç”¨å’Œä»»åŠ¡æ‰§è¡Œ
- **MonitorAgent**: ç›‘æ§æ™ºèƒ½ä½“ï¼Œè´Ÿè´£çŠ¶æ€ç›‘æ§å’Œå¼‚å¸¸å¤„ç†

## ğŸ”„ æ‰§è¡Œæµç¨‹

1. **ä»»åŠ¡æ¥æ”¶**: ç”¨æˆ·æäº¤ä»»åŠ¡ï¼Œç³»ç»ŸéªŒè¯å¹¶æ ‡å‡†åŒ–
2. **ä»»åŠ¡è§„åˆ’**: è§„åˆ’æ™ºèƒ½ä½“åˆ†æä»»åŠ¡ï¼Œåˆ¶å®šæ‰§è¡Œè®¡åˆ’
3. **ä»»åŠ¡åˆ†é…**: æ ¹æ®è®¡åˆ’åˆ†é…ç»™ç›¸åº”çš„æ‰§è¡Œæ™ºèƒ½ä½“
4. **å¹¶è¡Œæ‰§è¡Œ**: å¤šä¸ªæ™ºèƒ½ä½“ååŒæ‰§è¡Œä»»åŠ¡æ­¥éª¤
5. **çŠ¶æ€ç›‘æ§**: ç›‘æ§æ™ºèƒ½ä½“è·Ÿè¸ªæ‰§è¡ŒçŠ¶æ€å’Œå¤„ç†å¼‚å¸¸
6. **ç»“æœèšåˆ**: æ”¶é›†å„æ™ºèƒ½ä½“çš„æ‰§è¡Œç»“æœå¹¶æ•´åˆ
7. **å®Œæˆåé¦ˆ**: é€šè¿‡SSEå®æ—¶æ¨é€æ‰§è¡Œè¿‡ç¨‹å’Œæœ€ç»ˆç»“æœ

## ğŸ¯ DemoåŠŸèƒ½

å‰ç«¯Demoå±•ç¤ºäº†å®Œæ•´çš„å¤šæ™ºèƒ½ä½“ååŒè¿‡ç¨‹ï¼š

- **ä»»åŠ¡è¾“å…¥**: æ”¯æŒå¤æ‚ä»»åŠ¡æè¿°å’Œä¼˜å…ˆçº§è®¾ç½®
- **å®æ—¶ç›‘æ§**: é€šè¿‡SSEå®æ—¶æ˜¾ç¤ºæ™ºèƒ½ä½“æ€è€ƒå’Œè¡ŒåŠ¨è¿‡ç¨‹
- **è¿›åº¦è¿½è¸ª**: å¯è§†åŒ–ä»»åŠ¡æ‰§è¡Œè¿›åº¦å’ŒçŠ¶æ€å˜åŒ–
- **ç»“æœå±•ç¤º**: å±•ç¤ºæœ€ç»ˆçš„æ‰§è¡Œè®¡åˆ’å’Œç»“æœ
- **ç»Ÿè®¡ä¿¡æ¯**: æ˜¾ç¤ºæ¶ˆæ¯æ•°é‡ã€æ€è€ƒæ¬¡æ•°ç­‰ç»Ÿè®¡æ•°æ®

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æ™ºèƒ½ä½“

1. ç»§æ‰¿ `ReActAgent` æˆ– `BaseAgent`
2. å®ç° `think()` å’Œ `act()` æ–¹æ³•
3. å®šä¹‰æ™ºèƒ½ä½“çš„ç³»ç»Ÿæç¤ºå’Œé…ç½®
4. åœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­æ³¨å†Œæ–°æ™ºèƒ½ä½“

### æ‰©å±•å·¥å…·èƒ½åŠ›

1. é›†æˆMCPå·¥å…·åˆ°æ™ºèƒ½ä½“é…ç½®
2. åœ¨ `act()` æ–¹æ³•ä¸­è°ƒç”¨ç›¸åº”å·¥å…·
3. å¤„ç†å·¥å…·æ‰§è¡Œç»“æœå’Œé”™è¯¯

### è‡ªå®šä¹‰äº‹ä»¶

1. åœ¨ç±»å‹å®šä¹‰ä¸­æ·»åŠ æ–°çš„äº‹ä»¶ç±»å‹
2. åœ¨æ™ºèƒ½ä½“ä¸­å‘é€è‡ªå®šä¹‰äº‹ä»¶
3. åœ¨å‰ç«¯å¤„ç†æ–°çš„äº‹ä»¶ç±»å‹

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- npm >= 8.0.0
- OpenAI API Key (æˆ–å…¶ä»–æ”¯æŒçš„LLM API)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢ OpenManus é¡¹ç›®æä¾›çš„æ™ºèƒ½ä½“æ¶æ„è®¾è®¡ç†å¿µ
- æ„Ÿè°¢ OpenAI æä¾›çš„å¼ºå¤§è¯­è¨€æ¨¡å‹API
- æ„Ÿè°¢ Model Context Protocol (MCP) æä¾›çš„å·¥å…·é›†æˆæ¡†æ¶

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ç»´æŠ¤è€…: nnnnzs
- é¡¹ç›®åœ°å€: [https://github.com/nnnnzs/mcp-client](https://github.com/nnnnzs/mcp-client)

---

**ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStarï¼** 